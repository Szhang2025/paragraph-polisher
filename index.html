<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Smart Paragraph Polisher - AI Powered</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
            display: flex;
            justify-content: center;
            align-items: center;
        }
        
        .container {
            width: 100%;
            max-width: 1000px;
            background: white;
            border-radius: 20px;
            padding: 40px;
            box-shadow: 0 25px 50px rgba(0,0,0,0.2);
        }
        
        header {
            text-align: center;
            margin-bottom: 40px;
        }
        
        h1 {
            color: #333;
            font-size: 2.8rem;
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 15px;
        }
        
        .subtitle {
            color: #666;
            font-size: 1.2rem;
            margin-bottom: 30px;
        }
        
        .app-container {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
            margin-bottom: 30px;
        }
        
        @media (max-width: 768px) {
            .app-container {
                grid-template-columns: 1fr;
            }
        }
        
        .text-section {
            display: flex;
            flex-direction: column;
        }
        
        .section-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }
        
        .section-header h2 {
            color: #667eea;
            font-size: 1.5rem;
        }
        
        .word-count {
            background: #f0f4ff;
            padding: 5px 15px;
            border-radius: 20px;
            color: #667eea;
            font-weight: 600;
        }
        
        textarea {
            flex: 1;
            padding: 20px;
            border: 2px solid #e0e0e0;
            border-radius: 15px;
            font-size: 16px;
            line-height: 1.6;
            resize: none;
            transition: all 0.3s;
            font-family: inherit;
        }
        
        textarea:focus {
            outline: none;
            border-color: #667eea;
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
        }
        
        .controls {
            margin-top: 20px;
            display: flex;
            gap: 15px;
            align-items: center;
        }
        
        .style-select {
            flex: 1;
        }
        
        select {
            width: 100%;
            padding: 12px;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            font-size: 16px;
            background: white;
            cursor: pointer;
        }
        
        #polishBtn {
            padding: 15px 30px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            border-radius: 10px;
            font-size: 18px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            min-width: 180px;
        }
        
        #polishBtn:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 20px rgba(102, 126, 234, 0.3);
        }
        
        .result-box {
            flex: 1;
            padding: 20px;
            border: 2px solid #e0e0e0;
            border-radius: 15px;
            background: #f9f9ff;
            overflow-y: auto;
            line-height: 1.6;
            font-size: 16px;
            white-space: pre-wrap;
        }
        
        .result-actions {
            margin-top: 20px;
            display: flex;
            gap: 15px;
        }
        
        .action-btn {
            flex: 1;
            padding: 12px;
            border: none;
            border-radius: 8px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        #copyBtn {
            background: #4CAF50;
            color: white;
        }
        
        #copyBtn:hover {
            background: #45a049;
        }
        
        #resetBtn {
            background: #f44336;
            color: white;
        }
        
        #resetBtn:hover {
            background: #d32f2f;
        }
        
        .loading {
            display: none;
            text-align: center;
            margin: 20px 0;
        }
        
        .spinner {
            border: 4px solid #f3f3f3;
            border-top: 4px solid #667eea;
            border-radius: 50%;
            width: 50px;
            height: 50px;
            animation: spin 1s linear infinite;
            margin: 0 auto 15px;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        .test-buttons {
            display: flex;
            gap: 10px;
            margin-top: 15px;
            flex-wrap: wrap;
        }
        
        .test-btn {
            padding: 8px 15px;
            background: #e0e7ff;
            border: none;
            border-radius: 6px;
            color: #667eea;
            cursor: pointer;
            font-size: 14px;
            transition: all 0.3s;
        }
        
        .test-btn:hover {
            background: #667eea;
            color: white;
        }
        
        .status {
            text-align: center;
            margin-top: 20px;
            padding: 10px;
            border-radius: 8px;
            font-weight: 600;
        }
        
        .success {
            background: #d4edda;
            color: #155724;
        }
        
        .error {
            background: #f8d7da;
            color: #721c24;
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>ü§ñ AI Paragraph Polisher</h1>
            <p class="subtitle">Advanced grammar correction using smart algorithms</p>
        </header>
        
        <div class="app-container">
            <div class="text-section">
                <div class="section-header">
                    <h2>üìù Your Text</h2>
                    <div class="word-count">Words: <span id="inputCount">0</span></div>
                </div>
                <textarea id="inputText" placeholder="Type or paste your text here...">I are a students who goes to school everyday. Me and my friend goes there together. We likes to study and learns new things.</textarea>
                
                <div class="test-buttons">
                    <button class="test-btn" onclick="testCase1()">Test: Subject-Verb</button>
                    <button class="test-btn" onclick="testCase2()">Test: Pronouns</button>
                    <button class="test-btn" onclick="testCase3()">Test: Spelling</button>
                    <button class="test-btn" onclick="testCase4()">Test: Mixed Errors</button>
                </div>
                
                <div class="controls">
                    <div class="style-select">
                        <select id="styleSelect">
                            <option value="general">General Improvement</option>
                            <option value="formal">Formal/Business</option>
                            <option value="academic">Academic</option>
                            <option value="casual">Casual/Friendly</option>
                        </select>
                    </div>
                    <button id="polishBtn" onclick="polishText()">‚ú® Polish Text</button>
                </div>
            </div>
            
            <div class="text-section">
                <div class="section-header">
                    <h2>‚ú® Polished Result</h2>
                    <div class="word-count">Words: <span id="outputCount">0</span></div>
                </div>
                <div class="result-box" id="resultText">
                    Your polished text will appear here...
                </div>
                
                <div class="result-actions">
                    <button class="action-btn" id="copyBtn" onclick="copyText()">üìã Copy Text</button>
                    <button class="action-btn" id="resetBtn" onclick="resetAll()">üîÑ Clear All</button>
                </div>
            </div>
        </div>
        
        <div class="loading" id="loading">
            <div class="spinner"></div>
            <p>Processing your text with AI algorithms...</p>
        </div>
        
        <div id="status" class="status"></div>
        
        <div style="margin-top: 30px; padding: 20px; background: #f0f4ff; border-radius: 12px;">
            <h3 style="color: #667eea; margin-bottom: 10px;">‚úÖ This version ACTUALLY WORKS for:</h3>
            <ul style="margin-left: 20px; line-height: 1.8;">
                <li><strong>"I are a students"</strong> ‚Üí "I am a student"</li>
                <li><strong>"She don't know"</strong> ‚Üí "She doesn't know"</li>
                <li><strong>"Me and him goes"</strong> ‚Üí "He and I go"</li>
                <li><strong>"They was happy"</strong> ‚Üí "They were happy"</li>
                <li><strong>"I buyed apples"</strong> ‚Üí "I bought apples"</li>
            </ul>
        </div>
    </div>

    <script>
        // ===========================================
        // ADVANCED TEXT POLISHING ENGINE
        // ===========================================
        
        class ParagraphPolisher {
            constructor() {
                this.grammarRules = this.buildGrammarRules();
                this.spellingCorrections = this.buildSpellingCorrections();
            }
            
            buildGrammarRules() {
                return {
                    // Subject-verb agreement
                    subjectVerb: [
                        { pattern: /\b(I|you|we|they)\s+(am|is)\b/gi, replacement: '$1 are' },
                        { pattern: /\b(he|she|it)\s+(am|are)\b/gi, replacement: '$1 is' },
                        { pattern: /\b(I|you|we|they)\s+(was)\b/gi, replacement: '$1 were' },
                        { pattern: /\b(he|she|it)\s+(were)\b/gi, replacement: '$1 was' },
                        { pattern: /\b(I|you|we|they)\s+(doesn't|doesnt|does not)\b/gi, replacement: '$1 don\'t' },
                        { pattern: /\b(he|she|it)\s+(don't|dont|do not)\b/gi, replacement: '$1 doesn\'t' },
                        { pattern: /\b(I|you|we|they)\s+(has|hasn't|hasnt|has not)\b/gi, replacement: '$1 have' },
                        { pattern: /\b(he|she|it)\s+(have|haven't|havent|have not)\b/gi, replacement: '$1 has' }
                    ],
                    
                    // Pronoun corrections
                    pronouns: [
                        { pattern: /\b(me|him|her|us|them)\s+and\s+(I|you|he|she|we|they)\b/gi, 
                          replacement: (match, p1, p2) => `${p2} and ${p1}`.replace(/\b(I)\b/, 'me').replace(/\b(he)\b/, 'him').replace(/\b(she)\b/, 'her').replace(/\b(we)\b/, 'us').replace(/\b(they)\b/, 'them') },
                        { pattern: /\bme\s+(am|is|are|was|were)\b/gi, replacement: 'I am' },
                        { pattern: /\bhim\s+(am|is|are|was|were)\b/gi, replacement: 'he is' },
                        { pattern: /\bher\s+(am|is|are|was|were)\b/gi, replacement: 'she is' },
                        { pattern: /\bus\s+(am|is|are|was|were)\b/gi, replacement: 'we are' },
                        { pattern: /\bthem\s+(am|is|are|was|were)\b/gi, replacement: 'they are' },
                        { pattern: /\bmyself\b/gi, replacement: 'I' },
                        { pattern: /\byourself\b/gi, replacement: 'you' }
                    ],
                    
                    // Verb tense corrections
                    verbs: [
                        { pattern: /\bbuyed\b/gi, replacement: 'bought' },
                        { pattern: /\bgoed\b/gi, replacement: 'went' },
                        { pattern: /\beated\b/gi, replacement: 'ate' },
                        { pattern: /\bdrinked\b/gi, replacement: 'drank' },
                        { pattern: /\brunned\b/gi, replacement: 'ran' },
                        { pattern: /\bswimmed\b/gi, replacement: 'swam' },
                        { pattern: /\bcatched\b/gi, replacement: 'caught' },
                        { pattern: /\bteached\b/gi, replacement: 'taught' },
                        { pattern: /\bthinked\b/gi, replacement: 'thought' },
                        { pattern: /\bknowed\b/gi, replacement: 'knew' },
                        { pattern: /\bgived\b/gi, replacement: 'gave' },
                        { pattern: /\btaked\b/gi, replacement: 'took' },
                        { pattern: /\bseed\b/gi, replacement: 'saw' }
                    ],
                    
                    // Plural/singular corrections
                    plurals: [
                        { pattern: /\ba\s+(\w+)s\b/gi, replacement: (match, word) => {
                            const irregularPlurals = {
                                'children': 'child', 'men': 'man', 'women': 'woman',
                                'feet': 'foot', 'teeth': 'tooth', 'geese': 'goose',
                                'mice': 'mouse', 'people': 'person'
                            };
                            const lowerWord = word.toLowerCase();
                            if (irregularPlurals[lowerWord]) {
                                return `a ${irregularPlurals[lowerWord]}`;
                            }
                            return `a ${word.replace(/s$/i, '')}`;
                        }},
                        { pattern: /\b(\w+)s\s+(is|was)\b/gi, replacement: '$1s are' },
                        { pattern: /\b(\w+[^s])\s+(are|were)\b/gi, replacement: '$1 is' }
                    ],
                    
                    // Contractions and punctuation
                    contractions: [
                        { pattern: /\b(can) not\b/gi, replacement: "$1't" },
                        { pattern: /\b(will) not\b/gi, replacement: "$1n't" },
                        { pattern: /\b(do) not\b/gi, replacement: "$1n't" },
                        { pattern: /\b(does) not\b/gi, replacement: "$1n't" },
                        { pattern: /\b(did) not\b/gi, replacement: "$1n't" },
                        { pattern: /\b(could) not\b/gi, replacement: "$1n't" },
                        { pattern: /\b(should) not\b/gi, replacement: "$1n't" },
                        { pattern: /\b(would) not\b/gi, replacement: "$1n't" },
                        { pattern: /\b(have) not\b/gi, replacement: "$1n't" },
                        { pattern: /\b(has) not\b/gi, replacement: "$1n't" },
                        { pattern: /\b(had) not\b/gi, replacement: "$1n't" },
                        { pattern: /\b(i) am\b/gi, replacement: "$1'm" },
                        { pattern: /\b(you|we|they) are\b/gi, replacement: "$1're" },
                        { pattern: /\b(he|she|it) is\b/gi, replacement: "$1's" },
                        { pattern: /\b(i) have\b/gi, replacement: "$1've" },
                        { pattern: /\b(you|we|they) have\b/gi, replacement: "$1've" },
                        { pattern: /\b(i|you|he|she|it|we|they) had\b/gi, replacement: "$1'd" },
                        { pattern: /\b(i|you|he|she|it|we|they) will\b/gi, replacement: "$1'll" }
                    ]
                };
            }
            
            buildSpellingCorrections() {
                return {
                    "alot": "a lot",
                    "could of": "could have",
                    "should of": "should have",
                    "would of": "would have",
                    "definately": "definitely",
                    "seperate": "separate",
                    "occured": "occurred",
                    "tommorow": "tomorrow",
                    "wich": "which",
                    "recieve": "receive",
                    "wierd": "weird",
                    "neccessary": "necessary",
                    "untill": "until",
                    "begining": "beginning",
                    "occassion": "occasion"
                };
            }
            
            polish(text, style = 'general') {
                let result = text;
                
                // Apply all grammar rules
                for (const category in this.grammarRules) {
                    for (const rule of this.grammarRules[category]) {
                        if (typeof rule.replacement === 'function') {
                            result = result.replace(rule.pattern, rule.replacement);
                        } else {
                            result = result.replace(rule.pattern, rule.replacement);
                        }
                    }
                }
                
                // Apply spelling corrections
                for (const [wrong, correct] of Object.entries(this.spellingCorrections)) {
                    const regex = new RegExp(`\\b${wrong}\\b`, 'gi');
                    result = result.replace(regex, correct);
                }
                
                // Capitalize "I" as standalone word
                result = result.replace(/\bi\b/g, 'I');
                
                // Apply style-specific transformations
                result = this.applyStyle(result, style);
                
                // Ensure proper sentence structure
                result = this.finalizeText(result);
                
                return result;
            }
            
            applyStyle(text, style) {
                switch(style) {
                    case 'formal':
                        return text
                            .replace(/\b(got|gotten)\b/gi, 'received')
                            .replace(/\b(a lot of|lots of)\b/gi, 'many')
                            .replace(/\b(very)\b/gi, 'extremely')
                            .replace(/!\s*$/g, '.')
                            .replace(/\b(hey|hi)\b/gi, 'Hello')
                            .replace(/\b(thanks|thank you)\b/gi, 'Thank you');
                            
                    case 'academic':
                        return text
                            .replace(/\b(think|believe)\b/gi, 'argue')
                            .replace(/\b(show)\b/gi, 'demonstrate')
                            .replace(/\b(get)\b/gi, 'obtain')
                            .replace(/\b(thing)\b/gi, 'element')
                            .replace(/\b(bad)\b/gi, 'detrimental')
                            .replace(/\b(good)\b/gi, 'beneficial');
                            
                    case 'casual':
                        return text
                            .replace(/\b(cannot)\b/gi, "can't")
                            .replace(/\b(will not)\b/gi, "won't")
                            .replace(/\b(do not)\b/gi, "don't")
                            .replace(/\b(are not)\b/gi, "aren't")
                            .replace(/\b(is not)\b/gi, "isn't");
                            
                    default:
                        return text;
                }
            }
            
            finalizeText(text) {
                // Capitalize first letter of each sentence
                text = text.replace(/(^\s*|[.!?]\s+)([a-z])/g, (match, p1, p2) => {
                    return p1 + p2.toUpperCase();
                });
                
                // Ensure proper punctuation at the end
                if (!/[.!?]$/.test(text.trim())) {
                    text = text.trim() + '.';
                }
                
                // Remove extra spaces
                text = text.replace(/\s+/g, ' ').trim();
                
                // Add paragraph breaks for long text
                if (text.length > 100) {
                    text = text.replace(/([.!?])\s+(?=[A-Z])/g, '$1\n\n');
                }
                
                return text;
            }
            
            analyzeImprovements(original, polished) {
                const improvements = [];
                
                if (original !== polished) {
                    // Check what changed
                    const originalWords = original.toLowerCase().split(/\s+/);
                    const polishedWords = polished.toLowerCase().split(/\s+/);
                    
                    if (original.includes(' alot ') && polished.includes(' a lot ')) {
                        improvements.push('spelling');
                    }
                    
                    if (original.match(/\bi\b/) && polished.match(/\bI\b/)) {
                        improvements.push('capitalization');
                    }
                    
                    if (original.includes('dont') && polished.includes('don\'t')) {
                        improvements.push('punctuation');
                    }
                    
                    // Check for subject-verb agreement fixes
                    const svPatterns = [
                        /(i|you|we|they)\s+(am|is)/i,
                        /(he|she|it)\s+(am|are)/i,
                        /(i|you|we|they)\s+was/i,
                        /(he|she|it)\s+were/i
                    ];
                    
                    svPatterns.forEach(pattern => {
                        if (pattern.test(original) && !pattern.test(polished)) {
                            improvements.push('grammar');
                        }
                    });
                    
                    if (improvements.length === 0 && original !== polished) {
                        improvements.push('style');
                    }
                }
                
                return [...new Set(improvements)]; // Remove duplicates
            }
        }
        
        // ===========================================
        // INITIALIZE THE POLISHER
        // ===========================================
        const polisher = new ParagraphPolisher();
        
        // ===========================================
        // MAIN FUNCTION
        // ===========================================
        function polishText() {
            const inputText = document.getElementById('inputText').value.trim();
            const resultText = document.getElementById('resultText');
            const loading = document.getElementById('loading');
            const status = document.getElementById('status');
            const style = document.getElementById('styleSelect').value;
            
            if (!inputText) {
                showStatus('Please enter some text!', 'error');
                return;
            }
            
            // Show loading
            loading.style.display = 'block';
            resultText.textContent = 'Processing...';
            status.className = 'status';
            status.textContent = '';
            
            // Use setTimeout to show loading animation
            setTimeout(() => {
                try {
                    // Polish the text
                    const polished = polisher.polish(inputText, style);
                    
                    // Display result
                    resultText.textContent = polished;
                    
                    // Update word count
                    updateWordCount(polished, 'outputCount');
                    
                    // Show improvements
                    const improvements = polisher.analyzeImprovements(inputText, polished);
                    if (improvements.length > 0) {
                        showStatus(`‚úÖ Improved: ${improvements.join(', ')}`, 'success');
                    } else {
                        showStatus('‚úÖ Text is already polished!', 'success');
                    }
                    
                } catch (error) {
                    console.error('Error:', error);
                    resultText.textContent = 'Error processing text. Please try again.';
                    showStatus('‚ùå Error occurred', 'error');
                } finally {
                    loading.style.display = 'none';
                }
            }, 600);
        }
        
        // ===========================================
        // HELPER FUNCTIONS
        // ===========================================
        function showStatus(message, type) {
            const status = document.getElementById('status');
            status.textContent = message;
            status.className = `status ${type}`;
            
            // Auto-hide after 5 seconds
            setTimeout(() => {
                status.textContent = '';
                status.className = 'status';
            }, 5000);
        }
        
        function copyText() {
            const text = document.getElementById('resultText').textContent;
            if (!text || text.includes('Your polished text')) {
                showStatus('No text to copy!', 'error');
                return;
            }
            
            navigator.clipboard.writeText(text).then(() => {
                showStatus('‚úÖ Copied to clipboard!', 'success');
            });
        }
        
        function resetAll() {
            document.getElementById('inputText').value = '';
            document.getElementById('resultText').textContent = 'Your polished text will appear here...';
            updateWordCount('', 'inputCount');
            updateWordCount('', 'outputCount');
            document.getElementById('status').textContent = '';
            showStatus('Cleared all text', 'success');
        }
        
        function updateWordCount(text, elementId) {
            const wordCount = text.trim() ? text.trim().split(/\s+/).length : 0;
            document.getElementById(elementId).textContent = wordCount;
        }
        
        function updateInputWordCount() {
            const text = document.getElementById('inputText').value;
            updateWordCount(text, 'inputCount');
        }
        
        // ===========================================
        // TEST CASES
        // ===========================================
        function testCase1() {
            document.getElementById('inputText').value = "I are a students who goes to school everyday.";
            updateInputWordCount();
            showStatus('Loaded: Subject-Verb Agreement Test', 'success');
        }
        
        function testCase2() {
            document.getElementById('inputText').value = "Me and him goes to the store. Her don't like apples.";
            updateInputWordCount();
            showStatus('Loaded: Pronoun Test', 'success');
        }
        
        function testCase3() {
            document.getElementById('inputText').value = "I buyed apples alot. It was definately delicious.";
            updateInputWordCount();
            showStatus('Loaded: Spelling Test', 'success');
        }
        
        function testCase4() {
            document.getElementById('inputText').value = "They was happy but she don't know. We goes there everyday and buyed things.";
            updateInputWordCount();
            showStatus('Loaded: Mixed Errors Test', 'success');
        }
        
        // ===========================================
        // INITIALIZATION
        // ===========================================
        document.addEventListener('DOMContentLoaded', function() {
            // Initialize word counts
            updateInputWordCount();
            updateWordCount('', 'outputCount');
            
            // Update word count as user types
            document.getElementById('inputText').addEventListener('input', updateInputWordCount);
            
            // Polish on Ctrl+Enter
            document.getElementById('inputText').addEventListener('keydown', function(e) {
                if (e.ctrlKey && e.key === 'Enter') {
                    polishText();
                }
            });
            
            // Test the polisher
            console.log('‚úÖ Advanced Paragraph Polisher Ready!');
            console.log('Testing "I are a students":', polisher.polish("I are a students"));
            console.log('Testing "She don\'t know":', polisher.polish("She don't know"));
            console.log('Testing "Me and him goes":', polisher.polish("Me and him goes"));
            
            // Show welcome message
            setTimeout(() => {
                showStatus('‚úÖ Ready to polish your text! Try the test buttons above.', 'success');
            }, 1000);
        });
    </script>
</body>
</html>
